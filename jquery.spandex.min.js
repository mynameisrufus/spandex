(function(a){a.fn.spandex=function(b){var c={init:function(b){var d={left:0,top:0,position:"fixed",overflow:"hidden",zIndex:-999999,margin:0,padding:0,height:"100%",width:"100%"};return this.each(function(){$this=a(this),$this.data("spandex",a.extend({speed:0,centeredX:!0,centeredY:!0},b)),b.change&&$this.bind("change",b.change),b.stretch&&$this.bind("stretch",b.stretch),$this.parent()[0]==document.body&&a(function(){$this.css(d)})}),b.use?c.use.call(this,b.use):this},destroy:function(){return a(window).unbind(".spandex"),this.each(function(){a(this).find("img.spandex").remove()})},use:function(b,c){var d="onorientationchange"in window?a(document):a(window);return this.each(function(){var c,e,f;silentFail=a.browser.msie&&a.browser.version<=7,c=a(this),e=c.data("spandex"),f=function(f){c.trigger("change",b);var g=a(this),h,i;g.css({width:"auto",height:"auto"}),h=this.width||a(f.target).width(),i=this.height||a(f.target).height(),imgRatio=h/i,resize=function(){bgCSS={left:0,top:0},width=function(){return e.minWidth?d.width()>=e.minWidth?d.width():e.minWidth:d.width()},l=width(),k=l/imgRatio;var f,j;if(k>=d.height()){var f=(k-d.height())/2;e.centeredY&&a.extend(bgCSS,{top:"-"+f+"px"})}else{var k=d.height(),l=k*imgRatio,j=(l-d.width())/2;e.centeredX&&a.extend(bgCSS,{left:"-"+j+"px"})}c.width(l).height(k),g.css(a.extend(bgCSS,{width:l,height:k})),values={width:l,height:k,ratio:imgRatio,offsetTop:f||0,offsetLeft:j||0,scale:(l/h+k/i)/2,image:{width:h,height:i,src:b}},c.trigger("stretch",values)},resizeCallback=function(){if(silentFail)resize();else try{resize()}catch(a){}},a(window).bind("resize.spandex",resizeCallback),a(function(){resizeCallback(),g.fadeIn(e.speed)})};var g={position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999};c.find("img.spandex").fadeOut(e.speed,function(){a(this).remove()}),a("<img />").css(g).bind("load",f).appendTo(c).attr("class","spandex").attr("src",b)})}};if(c[b])return c[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return c.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.spandex")}})(jQuery);