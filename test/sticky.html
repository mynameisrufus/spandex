<!DOCTYPE html>
<html>
<head>
  <title>Spandex Test</title>
  <meta name = "viewport" content = "user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <link href="test.css" media="all" rel="stylesheet" type="text/css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="../lib/jquery.spandex.js" type="text/javascript"></script>
  <style>
    #marker {
      position: absolute;
      background-color: rgba(198,22,51,0.6);
    }
  </style>
</head>
<body>
  <h1>Spandex</h1>
  <div id="marker"></div>
  <div class="controls">
    <h2>Should:</h2>
    <ol>
      <li>position marker &#10004;</li>
      <li>scale marker &#10004;</li>
    </ol>
  </div>
<script>
  $(function() {
    var marker = $("#marker");
    var body   = $('body');

    body.bind('stretch', function(event, values) {
      var height = values.image.height;
      var width  = values.image.width;
      var ratio  = values.image.ratio;
      var left   = values.image.offset.left;
      var top    = values.image.offset.top;
      var scale  = values.image.scale;

      marker.css({
        "top": ((height * 0.2 * ratio) - top),
        "left": ((width * 0.5 * ratio) - left),
        "width": (100 * scale),
        "height": (100 * scale),
        "borderRadius": ((100 * scale) / 2)
      });
    });

    body.spandex({
      use: "images/normal.jpg",
      speed: 500
    });
  });
</script>
</body>
